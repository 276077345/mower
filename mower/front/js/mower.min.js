/*!
 * mower - v1.1.1 - 2015-08-31
 * Copyright (c) 2015 Infinitus, Inc.
 * Licensed under Apache License 2.0 (https://github.com/macula-projects/mower/blob/master/LICENSE)
 */
if("undefined"==typeof jQuery)throw new Error("mower's JavaScript requires jQuery");var UniqueId=function(){return function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a}}();Array.prototype.makeLevelTree=function(a){function b(a){var b=this;b.origin=a,b.getKey=function(){if(b.key)return b.key;if(b.key=[],b.key.push(e(b.origin)),b.key.push(c(b.origin)),b.parent)for(var a=b.parent.getKey(),d=a.length-1;d>=0;d--)b.key.unshift(a[d]);return b.key},b.compare2=function(a){for(var c=b.getKey(),d=a.getKey(),e=Math.min(c.length,d.length),f=0;e>f&&("undefined"!=typeof c[f]&&"undefined"!=typeof d[f]);f++)if(c[f]!=d[f]){var g=(c[f]+"").length-(d[f]+"").length;return 0==g?c[f]>d[f]?1:-1:g>0?1:-1}return c.length>d.length?1:-1}}function c(a){return"function"==typeof g?g(a)||0:a[g]||0}function d(a){return"function"==typeof h?h(a)||0:a[h]||0}function e(a){return"function"==typeof i?i(a)||0:a[i]||0}for(var f=a||{},g=f.id||"id",h=f.pid||"pid",i=f.order||"ordered",j=[],k=[],l=[],m=0;m<this.length;m++){var n=this[m];null!=n&&(n.children=[],j["$"+c(n)]=new b(n))}for(var m=0;m<this.length;m++){var n=this[m];if(null!=n){var o=j["$"+d(n)];o&&(j["$"+c(n)].parent=o,n.parent=o.origin),k.push(n)}}k.sort(function(a,b){return j["$"+c(a)].compare2(j["$"+c(b)])}),j=[];for(var m=0;m<k.length;m++){var n=k[m];n.parent?n.parent.children.push(n):l.push(n),j[n.code]=n}return k=[],{tree:l,nodes:j}},Date.prototype.setISO8601=function(a){if(a){var b="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):?([0-9]{2})))?)?)?)?",c=a.match(new RegExp(b)),d=0,e=new Date(c[1],0,1);c[3]&&e.setMonth(c[3]-1),c[5]&&e.setDate(c[5]),c[7]&&e.setHours(c[7]),c[8]&&e.setMinutes(c[8]),c[10]&&e.setSeconds(c[10]),c[12]&&e.setMilliseconds(1e3*Number("0."+c[12])),c[14]&&(d=60*Number(c[16])+Number(c[17]),d*="-"==c[15]?1:-1),d-=e.getTimezoneOffset(),time=Number(e)+60*d*1e3,this.setTime(Number(time))}},Number.prototype.limit=function(a,b){return a>this?a:this>b?b:this},Number.prototype.split=function(){return[this]},function(a,b,c,d,e){var f=function(a,c){var d=b(a),e=b(c),f=d.attr("id"),g=d.attr("data-uuid");if(f){var h=e.find("#"+f);h.exists()?(e.find("#"+f).html(d.html()).attr("base",d.attr("base")).attr("data-uuid",g),d=h):(e.html(d.html()).attr("base",d.attr("base")).attr("data-uuid",g),d=e),g&&d.on("remove",function(){b("html").find('[data-ref-target="'+this.attr("data-uuid")+'"]').remove()})}},g=function(a,c){var d=b(a),e=b(c),f=d.attr("id"),g=d.attr("data-uuid");if(f){d.attr("data-uuid",g);var h=e.find("#"+f);h.exists()?e.find("#"+f).replaceWith(d):e.replaceWith(d),g&&d.on("remove",function(){b("html").find('[data-ref-target="'+this.attr("data-uuid")+'"]').remove()})}},h=function(a,c){var d=b(a),e=b(c),f=d.attr("id"),g=d.attr("data-uuid");d.attr("data-uuid",g),f&&e.find("#"+f).length>0?e.find("#"+f).append(d):e.append(d),g&&d.on("remove",function(){b("html").find('[data-ref-target="'+d.attr("data-uuid")+'"]').remove()})};b.fn.extend({getContextPath:function(){if("undefined"==typeof a)var a="/";try{var c=b(this).closest("[data-base]");return null!=c&&c.size()?c.attr("data-base")||a:a}catch(d){return a}},exists:function(){return b(this)&&b(this).size()>0},patchHeight:function(){return b(this).outerHeight(!0)-b(this).height()},patchWidth:function(){return b(this).outerWidth(!0)-b(this).width()},scrollHeight:function(){return b(this)[0].scrollHeight},center:function(a){var d=b(a||c),e=d.height(),f=b(this).height(),g=(e-f)/2,h=d.width(),i=b(this).width(),j=(h-i)/2;return b(this).css({top:g>20?g/3:0,left:j>20?j:0})},showme:function(){return b(this).css({display:"block",visibility:"visible"})},hideme:function(){return b(this).css({display:"none",visibility:"hidden"})},sameHeight:function(a){var c=a||-1;return 0>c&&b(this).each(function(){c=Math.max(b(this).height(),c)}),b(this).css("min-height",c)},sameWidth:function(a){var c=a||-1;return 0>c&&b(this).each(function(){c=Math.max(b(this).width(),c)}),b(this).css("min-width",c)},alignFollow:function(a){var c=b(this),d=a.position(),e=a.offsetParent(),f=e.scrollTop(),g=e.scrollLeft(),h=e.width(),i=e.height(),j=d.top+f,k=d.left+g,l=j+a.outerHeight(!0),m=k+a.outerWidth(!0),n=l,o=k,p=c.outerHeight(!0),q=c.outerWidth(!0),r=j-p,s=m-q;c.css({top:i>n+p-f?n+"px":r+"px",left:h>o+q-g?o+"px":s+"px"})},cloneAttr:function(a){var c=this,d=["style","class"];return b.each(d,function(d,e){c.attr(e,b(a).attr(e)||"")}),this},setChecked:function(a){return b.isFunction(b.prop)?b(this).prop("checked",a):b(this).attr("checked",a),this},getChecked:function(){return b.isFunction(b.prop)?b(this).prop("checked"):b(this).attr("checked")},callEvent:function(a,c,d){if(b.isFunction(a)){"undefined"!=typeof d&&(a=b.proxy(a,d));var f=a(c);return c&&(c.result=f),!(f!==e&&!f)}return 1},updateRegions:function(a,e,f,g){var h=b(this),i={};i=b.extend({url:a,dataType:"html",success:function(a,e,j){var k=j.getResponseHeader("content-type")||"";if(k.indexOf("json")>-1)return void h.trigger("ajaxError",[j,i]);var l=b(a),m=h;if(f&&f.length){for(var n=f.length-1;n>=0;n--){var o,p=f[n];"string"==b.type(p)?o=h.find(p):(o=b(p),p=o.selector);var q=l.filter(p);q.exists()&&o.html(q.html())}var r=l.filter("title");r.exists()&&(d.title=r.text()),m.append(l.filter("script"))}else h.html(a);g&&b.isFunction(g)&&g.apply(h),b(c).trigger("resize")}},e||{}),b.ajax(i)},updateAjaxContents:function(a,c,d,e){b(this)._privateProcessContents(a,c,f,d,e)},replaceAjaxContents:function(a,c,d,e){b(this)._privateProcessContents(a,c,g,d,e)},appendAjaxContents:function(a,c,d,e){b(this)._privateProcessContents(a,c,h,d,e)},updateHtml:function(c,e,f){var g=b(this),h=b(c),i=a("ajax-uid-"),j=h.filter("title");j.exists()&&(d.title=j.text());var k=h.filter("meta");k.exists()&&b("meta[name=version]",d).attr("content",k.attr("content"));var l=":not(meta,title)";return b(b.parseHTML(c)).filter(l).each(function(){!b(this).attr("data-uuid")&&b(this).attr("data-uuid",i),e&&b.isFunction(e)&&e(this,g)}),b(d).triggerHandler("update",g),h.filter("script").each(function(){var a=b(this),c=a.attr("id");c&&g.find("#"+c).remove(),a.attr("data-ref-target")||a.attr("data-ref-target",i),g.append(a)}),b.isFunction(f)&&f.apply(g,[!0,c]),g},_privateProcessContents:function(a,d,e,f,g){var h=b(this),i={},j=function(){f&&b.isFunction(f)&&f.apply(h,[!1])};i=b.extend({url:a,dataType:"html",beforeSend:function(){h.children().addClass("hidden"),h.append('<h2 class="_loadmask"><i class="fa fa-spinner fa-pulse"></i></h2>'),g===!0&&b("html").animate({scrollTop:0},"fast")},success:function(a,d,g){var k=g.getResponseHeader("content-type")||"";if(k.indexOf("json")>-1)return j(),void h.trigger("ajaxError",[g,i]);try{h.css({opacity:"0.0"}).updateHtml(a,e,f).delay(50).animate({opacity:"1.0"},300),b(c).trigger("resize")}catch(l){j()}},error:function(a,b,c){j()},complete:function(a,b){h.find("h2._loadmask").remove(),h.children().removeClass("hidden")}},d||{}),b.ajax(i)}})}(UniqueId||{},jQuery,window,document);var JSON=function(a){return a.useHasOwn={}.hasOwnProperty?!0:!1,a.pad=function(a){return 10>a?"0"+a:a},a.m={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},a.encodeString=function(a){return/["\\\x00-\x1f]/.test(a)?'"'+a.replace(/([\x00-\x1f\\"])/g,function(a,b){var c=m[b];return c?c:(c=b.charCodeAt(),"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16))})+'"':'"'+a+'"'},a.encodeArray=function(a){var b,c,d=["["],e=!1,f=a.length;for(b=0;f>b;b+=1)switch(c=a[b],typeof c){case"undefined":case"function":case"unknown":break;default:e&&d.push(","),d.push(null===c?"null":this.encode(c)),e=!0}return d.push("]"),d.join("")},a.ncodeDate=function(a){return'"'+a.getFullYear()+"-"+pad(a.getMonth()+1)+"-"+pad(a.getDate())+"T"+pad(a.getHours())+":"+pad(a.getMinutes())+":"+pad(a.getSeconds())+'"'},a.encode=function(a){if("undefined"==typeof a||null===a)return"null";if(a instanceof Array)return this.encodeArray(a);if(a instanceof Date)return this.encodeDate(a);if("string"==typeof a)return this.encodeString(a);if("number"==typeof a)return isFinite(a)?String(a):"null";if("boolean"==typeof a)return String(a);var b,c,d,e=this,f=["{"];for(c in a)if(!this.useHasOwn||a.hasOwnProperty(c))switch(d=a[c],typeof d){case"undefined":case"function":case"unknown":break;default:b&&f.push(","),f.push(e.encode(c),":",null===d?"null":e.encode(d)),b=!0}return f.push("}"),f.join("")},a.decode=function(a){return new Function("return "+a)()},a}(JSON||{}),Utils=function(a,b,c,d){var e=!1,f=!1,g=!1,h=[],i=function(){e=!!navigator.userAgent.match(/MSIE 8.0/),f=!!navigator.userAgent.match(/MSIE 9.0/),g=!!navigator.userAgent.match(/MSIE 10.0/),g&&a("html").addClass("ie10"),(g||f||e)&&a("html").addClass("ie")},j=function(){for(var a=0;a<h.length;a++){var b=h[a];b.call()}},k=function(){var d;if(e){var f;a(b).resize(function(){f!=c.documentElement.clientHeight&&(d&&clearTimeout(d),d=setTimeout(function(){j()},50),f=c.documentElement.clientHeight)})}else a(b).resize(function(){d&&clearTimeout(d),d=setTimeout(function(){j()},50)})};return{init:function(){i(),k()},executeFunction:function(a){var c=Array.prototype.slice.call(arguments,1);if("function"==typeof a)return a.apply(this,c);if("string"==typeof a){"()"===a.substring(a.length-2)&&(a=a.substring(0,a.length-2));for(var d=a.split("."),e=d.pop(),f=b,g=0;g<d.length;g++)f=f[d[g]];return"undefined"==typeof f[e]?null:f[e].apply(this,c)}},getAbsoluteUrl:function(a,b){if(a.indexOf("://")>=0)return a;"/"!=a.charAt(0)&&(a="/"+a);var c=b||base;return a.startWith(c)?a:c+a},getURLParameter:function(a){var c,d,e=b.location.search.substring(1),f=e.split("&");for(c=0;c<f.length;c++)if(d=f[c].split("="),d[0]==a)return unescape(d[1]);return null},getViewPort:function(){var a=b,d="inner";return"innerWidth"in b||(d="client",a=c.documentElement||c.body),{width:a[d+"Width"],height:a[d+"Height"]}},addResizeHandler:function(a){h.push(a)},runResizeHandlers:function(){j()},getResponsiveBreakpoint:function(a){var b={xs:480,sm:768,md:992,lg:1200};return b[a]?b[a]:0},strToJson:function(a){var b=new Function("return "+a)();return b},isIE8:function(){return e},isIE9:function(){return f},isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return"undefined"==typeof a},toStr:function(a){return _.isUndefined(a)||null===a?"":a+""},bind:a.proxy,each:function(b,c){function d(a,b){return c(b,a)}a.each(b,d)},map:a.map,filter:a.grep,every:function(b,c){var d=!0;return b?(a.each(b,function(a,e){return(d=c.call(null,e,a,b))?void 0:!1}),!!d):d},some:function(b,c){var d=!1;return b?(a.each(b,function(a,e){return(d=c.call(null,e,a,b))?!1:void 0}),!!d):d},mixin:a.extend,templatify:function(b){function c(){return String(b)}return a.isFunction(b)?b:c},defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var d,e;return function(){var f,g,h=this,i=arguments;return f=function(){d=null,c||(e=a.apply(h,i))},g=c&&!d,clearTimeout(d),d=setTimeout(f,b),g&&(e=a.apply(h,i)),e}},throttle:function(a,b){var c,d,e,f,g,h;return g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)},function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},noop:function(){},scrollTo:function(b,c){var d=b&&b.size()>0?b.offset().top:0;b&&(d+=c?c:-1*b.height()),a("html,body").animate({scrollTop:d},"slow")}}}(jQuery,window,document);$(function(){Utils.init()}),function(){"use strict";String.prototype.format=function(a){var b=this;if(arguments.length>0){var c;if(1==arguments.length&&"object"==typeof a)for(var d in a)void 0!==a[d]&&(c=new RegExp("({"+d+"})","g"),b=b.replace(c,a[d]));else for(var e=0;e<arguments.length;e++)void 0!==arguments[e]&&(c=new RegExp("({["+e+"]})","g"),b=b.replace(c,arguments[e]))}return b},String.prototype.isNum=function(a){if(null!==a){var b,c;return c=/\d*/i,b=a.match(c),b==a?!0:!1}return!1},String.prototype.endWith=function(a){return null==a||""==a||0==this.length||a.length>this.length?!1:this.substring(this.length-a.length)==a?!0:!1},String.prototype.startWith=function(a){return null==a||""==a||0==this.length||a.length>this.length?!1:this.substr(0,a.length)==a?!0:!1},String.prototype.length2=function(){var a=this.match(/[^\x00-\xff]/gi);return this.length+(null==a?0:a.length)},String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")}}(),function(a){a.date=function(){function a(a){switch(parseInt(a)){case 0:return"Sunday";case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday";default:return a}}function b(a){switch(parseInt(a)){case 1:return"Jan";case 2:return"Feb";case 3:return"Mar";case 4:return"Apr";case 5:return"May";case 6:return"Jun";case 7:return"Jul";case 8:return"Aug";case 9:return"Sep";case 10:return"Oct";case 11:return"Nov";case 12:return"Dec";default:return a}}var c=function(a){switch(a){case"Jan":return"01";case"Feb":return"02";case"Mar":return"03";case"Apr":return"04";case"May":return"05";case"Jun":return"06";case"Jul":return"07";case"Aug":return"08";case"Sep":return"09";case"Oct":return"10";case"Nov":return"11";case"Dec":return"12";default:return a}},d=function(a){var b=a,c="";if(-1!==b.indexOf(".")){var d=b.split(".");b=d[0],c=d[1]}var e=b.split(":");return 3===e.length?(hour=e[0],minute=e[1],second=e[2],{time:b,hour:hour,minute:minute,second:second,millis:c}):{time:"",hour:"",minute:"",second:"",millis:""}},e="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):?([0-9]{2})))?)?)?)?",f=function(a){var b=a.match(new RegExp(e)),c=0,d=new Date(b[1],0,1);b[3]&&d.setMonth(b[3]-1),b[5]&&d.setDate(b[5]),b[7]&&d.setHours(b[7]),b[8]&&d.setMinutes(b[8]),b[10]&&d.setSeconds(b[10]),b[12]&&d.setMilliseconds(1e3*Number("0."+b[12])),b[14]&&(c=60*Number(b[16])+Number(b[17]),c*="-"==b[15]?1:-1),c-=d.getTimezoneOffset();var f=Number(d)+60*c*1e3;return d.setTime(Number(f)),d};return{format:function(g,h){if(null==g)return"";try{var i=null,j=null,k=null,l=null,m=null,n=null;if("function"==typeof g.getFullYear)j=g.getFullYear(),k=g.getMonth()+1,l=g.getDate(),m=g.getDay(),n=d(g.toTimeString());else if(-1!=g.search(e)){var o=f(g);j=o.getFullYear(),k=o.getMonth()+1,l=o.getDate(),m=o.getDay(),n=d(o.toTimeString())}else{var p=g.split(" ");switch(p.length){case 6:j=p[5],k=c(p[1]),l=p[2],n=d(p[3]),i=new Date(j,k-1,l),m=i.getDay();break;case 2:var q=p[0].split("-");j=q[0],k=q[1],l=q[2],n=d(p[1]),i=new Date(j,k-1,l),m=i.getDay();break;case 7:case 9:case 10:j=p[3],k=c(p[1]),l=p[2],n=d(p[4]),i=new Date(j,k-1,l),m=i.getDay();break;default:return g}}for(var r="",s="",t=0;t<h.length;t++){var u=h.charAt(t);switch(r+=u){case"ddd":s+=a(m),r="";break;case"dd":if("d"==h.charAt(t+1))break;1===String(l).length&&(l="0"+l),s+=l,r="";break;case"MMM":s+=b(k),r="";break;case"MM":if("M"==h.charAt(t+1))break;1===String(k).length&&(k="0"+k),s+=k,r="";break;case"yyyy":s+=j,r="";break;case"HH":s+=n.hour,r="";break;case"hh":s+=0==n.hour?12:n.hour<13?n.hour:n.hour-12,r="";break;case"mm":s+=n.minute,r="";break;case"ss":s+=n.second.substring(0,2),r="";break;case"SSS":s+=n.millis.substring(0,3),r="";break;case"a":s+=n.hour>=12?"PM":"AM",r="";break;case" ":s+=u,r="";break;case"/":s+=u,r="";break;case":":s+=u,r="";break;default:2===r.length&&0!==r.indexOf("y")&&"SS"!=r?(s+=r.substring(0,1),r=r.substring(1,2)):3===r.length&&-1===r.indexOf("yyy")&&(r="")}}return s}catch(v){return g}}}}()}(jQuery);var Base=function(a,b,c,d,e){"use strict";var f={},g=function(b,c,d,f,g){var h={},i="data-"+f+(g?g.toLowerCase()+"-":"")+b.toLowerCase();if(!d.attr(i))return h;if("function"===c)h[b]=new Function("return "+d.attr(i))();else if("string"===c)h[b]=d.attr(i);else if("boolean"===c)h[b]=d.attr(i)?"true"===d.attr(i):e;else if("number"===c)h[b]="0"==d.attr(i)?0:parseFloat(d.attr(i))||e;else if("array"===c){var c=d.attr(i);if(c)if(c.indexOf(";")>=0){var j=new Array;a.each(c.split(";"),function(a,b){b!==e&&b.length>0&&j.push(b.split(","))}),h[b]=j}else h[b]=c.split(",");else h[b]=e}return h},h=function(){var b=a.cleanData;a.cleanData=function(c){for(var d,e=0;null!=(d=c[e]);e++)try{a(d).triggerHandler("remove")}catch(f){}b(c)}},i=function(){if(b.isIE8()){var a=d.getElementsByTagName("head")[0],c=d.createElement("style");c.type="text/css",c.styleSheet.cssText=":before,:after{content:none !important}",a.appendChild(c),setTimeout(function(){a.removeChild(c)},0)}},j=function(){var a=(new Date).getTimezoneOffset(),b=new Date;b.setDate(b.getDate()+365),d.cookie="timezoneOffset="+escape(-1*a)+";expires="+b.toGMTString()};return f.init=function(){j(),h(),i()},f.parseOptions=function(b,c,d){var f=a(b),h=d?d.toLowerCase()+"-":"",i={},j=a.trim(f.attr("data-options"));if(j&&("{"!=j.substring(0,1)&&(j="{"+j+"}"),i=new Function("return "+j)()),c){for(var k={},l=0;l<c.length;l++){var m=c[l];if("string"==typeof m)"width"===m||"height"===m||"left"===m||"top"===m?k[m]=parseInt(b.style[m])||e:k[m]=f.attr("data-"+h+m.toLowerCase());else for(var n in m){var o=m[n];if("string"==typeof o)a.extend(k,g(n,o,f,h));else{var p={};for(var q in o){var r=o[q],s=g(q,r,f,h,n);a.isEmptyObject(s)||a.extend(p,s)}(!a.isEmptyObject(p)||"undefined"!=typeof o.empty&&o.empty===!0)&&(k[n]=p)}}}a.extend(i,k)}return i},f}(jQuery,Utils,window,document);$(function(){Base.init()}),function(a,b,c,d,e){"use strict";a(d).on("ready update",function(c,d){var e=a(d||"html");e.find("[rel=chosen]").each(function(c,d){var e=a(this);if(!e.data("chosen")){var f=a.extend({},b.parseOptions(e,[{disable_search_threshold:"number",no_results_text:"string",max_selected_options:"number",allow_single_deselect:"boolean"}]));a(this).chosen(f)}})})}(jQuery,Base||{},window,document),function(a,b,c,d){"use strict";var e=function(b,c){this.options=c,this.element=b,this.$element=a(b)},f="mu.remoteChosen",g="chosen";if(!a.fn.chosen)throw new Error("RemoteChosen requires chosen.jquery.js");e.DEFAULTS={url:"",datasource:!1,callback:null,nameField:"text",valueField:"value"},e.prototype={constructor:e,_init:function(b,c){var d=a(b);this.options=a.extend({},e.DEFAULTS,d.data(),"object"==typeof c&&c),this._initChosen(),this._loadData()},_initChosen:function(){return this.$element.chosen(this.options||{})},_construct:function(b){if(b){var c,d,e,e=[],f=this,g=this.$element;g.find("option").each(function(){return a(this).is(":selected")?e.push(a(this).val()+"-"+a(this).text()):a(this).remove()}),g.find("optgroup:empty").each(function(){return a(this).remove()}),c=null!=this.options.callback?this.options.callback(b,f.element):b,d=0,a.each(c,function(b,c){var h,i,j;return d++,c.group?(h=g.find("optgroup[label='"+c.text+"']"),h.size()||(h=a("<optgroup />")),h.attr("label",c.text).appendTo(g),a.each(c.items,function(b,c){var d,g;return"string"==typeof c?(g=b,d=c):(g=c[f.options.valueField],d=c[f.options.nameField]),-1===a.inArray(g+"-"+d,e)?a("<option />").attr("value",g).html(d).appendTo(h):void 0})):("string"==typeof c?(j=b,i=c):(j=c[f.options.valueField],i=c[f.options.nameField]),-1===a.inArray(j+"-"+i,e)?a("<option />").attr("value",j).html(i).appendTo(g):void 0)}),d?g.trigger("chosen:updated"):(g.data().chosen.no_results_clear(),g.data().chosen.no_results(g.val()))}},_loadData:function(){var c,d=this,e=this.options.url,e=e&&e.replace(/.*(?=#[^\s]+$)/,"");if(e)c=a.extend({},{url:e,dataType:"json",type:"GET"}),c.success=function(a){d._construct(a)},a.ajax(c);else{var f=this.options.datasource;a.isFunction(b[f])&&(f=f(d)),this._construct(f)}},reload:function(b){this.options=a.extend({},this.options,"object"==typeof b&&b),this._loadData()},getChosenIntance:function(){return this.$element.data("chosen")||this._initChosen()},_destroy:function(){a.data(this.$element,g,null)}};var h=a.fn.remoteChosen;a.fn.remoteChosen=function(b){var c,g=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=this,h=(a(d),f),i=a.data(d,h);if(i||(i=a.data(d,h,new e(d,b)),i&&"function"==typeof e.prototype._init&&e.prototype._init.apply(i,[d,b])),i&&"string"==typeof b&&"_"!==b[0]&&"init"!==b){var j="destroy"==b?"_destroy":b;"function"==typeof e.prototype[j]&&(c=e.prototype[j].apply(i,g)),"destroy"===b&&a.data(d,h,null)}}),c!==d?c:this},a.fn.remoteChosen.Constructor=e,a.fn.remoteChosen.noConflict=function(){return a.fn.remoteChosen=h,this},a(c).on("ready update",function(b,c){var d=a(c||"html");d.find("[rel=remoteChosen]").each(function(b,c){var d=a(this);d.data(f)||a(this).remoteChosen()})})}(jQuery,window,document),function(a,b,c){function d(b){return"ontouchstart"in document?this:(e=e.add(this.parent()),this.each(function(){var c=a(this),d=c.data("bs.dropdownhover");d||c.data("bs.dropdownhover",d=new f(this,b)),"string"==typeof b&&d[b].call(c)}))}var e=a(),f=function(b,c){this.element=b,this.$element=a(b),this.options=c,this.init()};f.prototype.init=function(){var c,d=this.$element.parent(),f={delay:500,instantlyCloseOthers:!0},g={delay:this.$element.data("delay"),instantlyCloseOthers:this.$element.data("close-others")},h="show.bs.dropdown",i="hide.bs.dropdown",j=a.extend(!0,{},f,this.options,g),k=this;d.hover(function(a){return d.hasClass("open")||k.$element.is(a.target)?(e.find(":focus").blur(),j.instantlyCloseOthers===!0&&e.removeClass("open"),b.clearTimeout(c),d.addClass("open"),void k.$element.trigger(h)):!0},function(){c=b.setTimeout(function(){d.removeClass("open"),k.$element.trigger(i)},j.delay)}),this.$element.hover(function(){e.find(":focus").blur(),j.instantlyCloseOthers===!0&&e.removeClass("open"),b.clearTimeout(c),d.addClass("open"),k.$element.trigger(h)}),d.find(".dropdown-submenu").each(function(){var c,d=a(this);d.hover(function(){b.clearTimeout(c),d.children(".dropdown-menu").show(),d.siblings().children(".dropdown-menu").hide()},function(){var a=d.children(".dropdown-menu");c=b.setTimeout(function(){a.hide()},j.delay)})})};var g=a.fn.dropdownHover;a.fn.dropdownHover=d,a.fn.dropdownHover.Constructor=f,a.fn.dropdownHover.noConflict=function(){return a.fn.dropdownHover=g,this},a(document).on("ready update",function(b,c){var d=a(c||"html");d.find('[data-hover="dropdown"]').each(function(b,c){var d=a(this);d.data("bs.dropdownhover")||d.dropdownHover()})})}(jQuery,window),function(a,b,c,d,e){"use strict";var f=function(a){var c=b.parseOptions(this)||{},d=c.closeOnBodyClick;d===!1&&a.stopPropagation()};a(d).on("click.bs.dropdown.data-api","[rel=dropdown-menu]",f)}(jQuery,Base||{},window,document),function(a,b,c,d,e,f){"use strict";var g="[data-toggle=menu]",h=function(a,b){this.element=a,this.$element=c(a),this.options=b,this.nodes=[]};h.DEFAULTS={url:"",param:"{}",method:"GET",dataType:"json",groupTemplate:function(){return"function"==typeof c.template?c.template(null,'{{each(index2, menu2) children}} <li> {{if menu2.children.length}} <h3 class="title">${menu2.name}</h3> <ul class="list-unstyled list-inline"> {{each(index3, menu3) menu2.children}} <li> <a mcode="${menu3.code}" href="javascript:void(0);" data-href="${menu3.uri}" data-toggle="menu">${menu3.name}</a> </li>{{/each}} </ul> {{else}} <a mcode="${menu2.code}" href="javascript:void(0);" data-href="${menu2.uri}" data-toggle="menu">${menu2.name}</a> {{/if}} </li> <li class="divider"> </li> {{/each}}'):""},defaultTemplate:function(){return"function"==typeof c.template?c.template(null,'{{each(index2, menu2) children}} <li>   <a mcode="${menu2.code}" href="javascript:void(0);" data-href="${menu2.uri}" data-toggle="menu">${menu2.name}</a> </li> {{/each}}'):""},events:{clickMenu:"clickMenu.mu.nbMenu",complete:"complete.mu.nbMenu",populateError:"error.populate.mu.nbMenu",populateSuccess:"success.populate.mu.nbMenu"}},h.prototype={constructor:h,_init:function(d,e){var f=c(d);this.options=c.extend({},h.DEFAULTS,f.data(),"object"==typeof e&&e),this.options.url&&(this.options.url=b.getAbsoluteUrl(this.options.url,f.getContextPath())),this.options.param=a.decode(this.options.param||"{}");var g=this;f.one("mouseover",function(a){a.relatedTarget;g.populate()})},constructTree:function(a){var b=a.makeLevelTree({pid:"parentId",order:function(a){return a.attributes.ordered}});this.nodes=b.nodes,this.renderMenu(b.tree);var d=c.Event(h.DEFAULTS.events.complete);return this.$element.trigger(d),b.tree},renderMenu:function(a){var f=this;c(g,this.$element).each(function(a,b){var d=c(b).closest("li"),g=c(b).attr("data-code"),h=c(b);if(g){d.children(".dropdown-menu").remove();var i=f.findMenuByCode(g);if(c.isPlainObject(i)){var j,k=c(b).attr("data-level");"two"===k?(j=c('<ul class="dropdown-menu" role="menu"></ul>'),c.tmpl(f.options.defaultTemplate(),i).appendTo(j),j.appendTo(d)):(j=c('<ul class="dropdown-menu" role="menu"> <li> <div class="yamm-content"> <ul class="list-unstyled"> </ul> </div> </li> </ul>'),c.tmpl(f.options.groupTemplate(),i).appendTo(j.find(".yamm-content").children("ul")),j.appendTo(d),j.find("li.divider").filter(":last").remove()),h.attr("data-toggle","dropdown").attr("data-hover","dropdown").addClass("dropdown-toggle"),d.addClass("dropdown"),c(e).triggerHandler("update",d)}}}),this.$element.on("click.module.mu.menu",'[data-toggle="menu"]',function(a){var e=c(this),g=e.attr("_mcode")||e.attr("mcode"),i=e.attr("data-href"),j=f.findMenuByCode(g);e.is("a")&&a.preventDefault();var k=this,l=c.Event(h.DEFAULTS.events.clickMenu,{relatedTarget:f.element,target:k,mcode:g,href:i,instance:j});if(f.$element.trigger(l),!l.isDefaultPrevented()){i=e.attr("data-href"),c.isFunction(decodeURIComponent)&&(i=decodeURIComponent(i));var m=b.getAbsoluteUrl(i,f.$element.getContextPath());m=m+(m.indexOf("?")>-1?"&":"?")+"_="+(new Date).valueOf(),d.location.href=m}})},populate:function(){var a=this,b=this.options.url;c.ajax({url:b,cache:!0,data:this.options.param,dataType:this.options.dataType,type:this.options.method,success:function(b){var d;null!=b&&null!=b.error?(d=c.Event(h.DEFAULTS.events.populateError,{data:b}),a.$element.trigger(d)):(a.constructTree(b),d=c.Event(h.DEFAULTS.events.populateSuccess,{data:b}),a.$element.trigger(d))},error:function(b){var d=c.Event(h.DEFAULTS.events.populateError,{data:b});a.$element.trigger(d)}})},findMenuByCode:function(a){return a&&this.nodes[a]},_destroy:function(){}};var i=c.fn.nbMenu;c.fn.nbMenu=function(a){var b,d=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=this,f=(c(e),"mu.nbMenu"),g=c.data(e,f);if(g||(g=c.data(e,f,new h(e,a)),g&&"function"==typeof h.prototype._init&&h.prototype._init.apply(g,[e,a])),g&&"string"==typeof a&&"_"!==a[0]&&"init"!==a){var i="destroy"==a?"_destroy":a;"function"==typeof h.prototype[i]&&(b=h.prototype[i].apply(g,d)),"destroy"===a&&c.data(e,f,null)}}),b!==f?b:this},c.fn.nbMenu.Constructor=h,c.fn.nbMenu.noConflict=function(){return c.fn.nbMenu=i,this},c(e).on("ready update",function(a,b){var d=c(b||"html");d.find("[rel=nbMenu]").each(function(a,b){var d=c(this);d.data("mu.nbMenu")||c(this).nbMenu()})})}(JSON||{},Utils||{},jQuery,window,document),function(a,b,c,d,e){"use strict";a(d).on("ready update",function(b,c){var d=a(c||"html");d.find("[rel=popover]").each(function(b,c){var d=a(this);if(!d.data("bs.popover")){var e=d.data("container")||"body",f=d.data("placement")||"top";d.popover({container:e,placement:f})}})})}(jQuery,Base||{},window,document),function(a,b,c,d){"use strict";function e(b){var c,e=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=this,g=(a(d),"mu.atab"),h=a.data(d,g);if(h||(h=a.data(d,g,new f(d,b)),h&&"function"==typeof f.prototype._init&&f.prototype._init.apply(h,[d,b])),h&&"string"==typeof b&&"_"!==b[0]&&"init"!==b){var i="destroy"==b?"_destroy":b;"function"==typeof f.prototype[i]&&(c=f.prototype[i].apply(h,e)),"destroy"===b&&a.data(d,g,null)}}),c!==d?c:this}var f=function(b,c){this.$element=a(b),this.options=c};f.VERSION="3.2.0",f.DEFAULTS={prefix:"atab",cache:!0},f.prototype._init=function(b,c){var d=a(b);this.options=a.extend({},f.DEFAULTS,d.data(),"object"==typeof c&&c),this.ConstructTabContent()},f.prototype.ConstructTabContent=function(){var b=this.$element.next("div.tab-content");if(0===b.length){var c=['<div class="tab-content">',"</div>"].join("");this.$element.parent().append(c),b=this.$element.next("div.tab-content")}var d=this;this.$element.find(" li > a ").filter('[data-toggle="atab"]').each(function(c,e){var f=a(e),g=b.children().filter(f.attr("data-target"));if(0===g.length){var h=d.options.prefix+"-content-"+c,i=['<div class="tab-pane" id="',h,'">',"</div>"].join("");b.append(i),h="#"+h,f.attr("data-target",h)}})},f.prototype.add=function(b,c){var d=a(['<li><a href="',c,'" role="tab" data-toggle="atab" >',b,"</a></li>"].join(""));this.$element.append(d),this.ConstructTabContent(),this.show(d.children("a"))},f.prototype.show=function(b){var c=a(b),d=c.attr("data-href")||c.attr("href"),e=this.$element.next("div.tab-content").children(c.attr("data-target")),f=function(){c.tab("show")},g=function(b){a.get(d,function(a,c,d){e.html(a),b&&b()})};c.data("bs.tab")&&this.options.cache?f():(e.empty(),g(f))};var g=a.fn.atab;a.fn.atab=e,a.fn.atab.Constructor=f,a.fn.atab.noConflict=function(){return a.fn.atab=g,this},a(c).on("click.mu.atab.data-api",'[data-toggle^="atab"]',function(b){var c=a(this);c.is("a")&&b.preventDefault(),e.call(a(this).closest("ul"),"show",this)}).on("click.mu.atab.data-api",'[data-toggle^="ntab"]',function(b){var c=a(this),d=c.attr("data-title"),f=c.attr("data-href")||c.attr("href");f=f&&f.replace(/.*(?=#[^\s]+$)/,"");var g=a(c.attr("data-target")),h=a.extend({},g.data(),c.data());c.is("a")&&b.preventDefault(),e.call(g,h).call("add",d,f).one("hide",function(){c.is(":visible")&&c.focus()})}).on("ready",function(b){var c=a('[data-toggle^="atab"]').parent("li.active").eq(0),d=function(b){a(b).removeClass("active"),e.call(a(b).closest("ul"),"show",a(b).find('[data-toggle^="atab"]'))};c.length&&d(c[0])})}(jQuery,window,document),function(a,b,c,d,e){"use strict";a(d).on("ready update",function(b,c){var d=a(c||"html");d.find("[rel=tooltip]").each(function(b,c){var d=a(this);if(!d.data("bs.tooltip")){var e=d.data("container")||"body";a(this).tooltip({container:e})}})})}(jQuery,Base||{},window,document),function(a,b,c,d,e,f){"use strict";function g(c){var e=a(c.target),f=c.data;e.ajaxSubmit({success:function(c){if(c.success)b.executeFunction(f.success,c);else{"undefined"!=typeof d.AlertBox&&c.exceptionMessage&&AlertBox.error(c.exceptionMessage);var g=e.data("bootstrapValidator");g.length&&a(c.validateErrors).each(function(){g.updateMessage(this.element,"blank",this.message).updateStatus(this.element,"INVALID","blank")}),b.executeFunction(f.error,c)}}})}function h(a){}var i="error.form.bv",j="success.form.bv",k="submit.bv";a.fn.ajaxValidSubmit=function(b){var c=a(this);return c.off(j).off(i).on(j,b,g).on(i,b,h),c.triggerHandler(k),this};var l='[rel="validate-form"]';a(e).on("ready update",function(b,c){var d=a(c||"html");d.find(l).each(function(b,c){var d=a(this);d.data("bootstrapValidator")||d.bootstrapValidator({excluded:[":disabled"],message:"请输入合法的数值",feedbackIcons:{valid:"fa fa-check",invalid:"fa fa-times",validating:"fa fa-refresh",required:"required"}})})})}(jQuery,Utils||{},Base||{},window,document),function(a,b){"use strict";"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?module.exports=b(require("jquery")):a.ModalBox=b(a.jQuery,window,document)}(this,function(a,b,c,d){function e(c){if(c.url&&(!c.type||"ajax"!=c.type&&"iframe"!=c.type)&&(c.type="ajax"),c.remote)c.type="ajax","string"==typeof c.remote&&(c.url=c.remote);else if(c.iframe)c.type="iframe","string"==typeof c.iframe&&(c.url=c.iframe);else if(c.custom&&(c.type="custom","string"==typeof c.custom)){var d;try{d=a(c.custom)}catch(e){}d&&d.length?c.custom=d:a.isFunction(b[c.custom])&&(c.custom=b[c.custom]);
}}if(!b.bootbox)throw new Error("ModalBox requires bootbox.js");if(!a.fn.slimScroll)throw new Error("ModalBox requires slimScroll.js");var f="mower.modalbox",g={type:"custom",width:null,size:null,height:"auto",name:"remoteModal",spinner:'<div class="fa fa-spinner fa-pulse loader"></div>',delay:0},h=bootbox;return h.ajaxDialog=function(i){var j=a.extend({},g,i);e(j);var k=j.show===d?!0:j.show;j.show=!1;var l=this,m=h.dialog(j),n=m.find(".modal-dialog"),o=j.custom,p=n.find(".modal-body").css("padding",""),q=n.find(".modal-header"),r=n.find(".modal-content");m.toggleClass("modal-loading",!0),j.size&&(j.width="",j.height="");var s=function(a){"undefined"==typeof a&&(a=300),setTimeout(function(){n=m.find(".modal-dialog"),j.width&&"auto"!=j.width&&n.css("width",j.width),j.height&&"auto"!==j.height&&(n.css("height",j.height),"iframe"===j.type?p.css("height",n.height()-q.outerHeight()):p.slimScroll({height:n.height()-q.outerHeight()})),m.removeClass("modal-loading")},a)};if("custom"===j.type&&o)if(a.isFunction(o)){var t=o({modal:m,options:j,ready:s});"string"==typeof t&&(p.html(t),s())}else o instanceof a?(p.html(a("<div>").append(o.clone()).html()),s()):(p.html(o),s());else if(j.url)if(m.attr("ref",j.url),"iframe"===j.type){m.addClass("modal-iframe"),this.firstLoad=!0;var u="iframe-"+j.name;q.detach(),p.detach(),r.empty().append(q).append(p),p.css("padding",0).html('<iframe id="'+u+'" name="'+u+'" src="'+j.url+'" frameborder="no" allowtransparency="true" scrolling="auto" style="width: 100%; height: 100%; left: 0px;"></iframe>'),j.waittime>0&&(l.waitTimeout=setTimeout(s,j.waittime));var v=c.getElementById(u);v.onload=v.onreadystatechange=function(){if(l.firstLoad&&m.addClass("modal-loading"),!this.readyState||"complete"==this.readyState){l.firstLoad=!1,j.waittime>0&&clearTimeout(l.waitTimeout);try{m.attr("ref",v.contentWindow.location.href);var a=b.frames[u].$;if(a&&"auto"===j.height){var c=a("body").addClass("body-modal"),d=function(){m.removeClass("fade");var a=c.outerHeight();p.css("height",a),j.fade&&m.addClass("fade"),s()};m.callEvent("loaded.mower.modal",{modalType:"iframe"}),setTimeout(d,100),c.off("resize."+f).on("resize."+f,d),a.extend({closeModal:b.closeModal})}else s()}catch(e){s()}}}}else a.get(j.url,function(b){try{var d=a(b),e=d.filter("meta");e.exists()&&a("meta[name=version]",c).attr("content",e.attr("content"));var f=":not(meta)";a(a.parseHTML(b)).filter(f).each(function(){var b=a(this);b.hasClass("modal-dialog")?n.replaceWith(b):b.hasClass("modal-content")?n.find(".modal-content").replaceWith(b):b.hasClass("modal-title")?n.find(".modal-title").replaceWith(b):b.hasClass("modal-body")?n.find(".modal-body").replaceWith(b):p.wrapInner(b)}),a(c).triggerHandler("update",m[0]),d.filter("script").each(function(){var b=a(this);m.append(b)})}catch(g){p.wrapInner(b)}m.callEvent("loaded.mower.modal",{modalType:"ajax"}),s()});k===!0&&(m.prepend(j.spinner),m.modal("show"))},a(c).on("click."+f+".data-api",'[data-toggle="modalbox"]',function(b){var c=a(this);h.ajaxDialog(a.extend({},c.data())),c.is("a")&&b.preventDefault()}),h});var MessageBox=function(a,b){var c={closeButton:!0,debug:!1,positionClass:"toast-top-center",onclick:null,showDuration:"1000",hideDuration:"1000",timeOut:"2000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};return{init:function(){b.options=a.extend({},b.options,c)},success:function(a,c,d){b.success(a,c,d)},warning:function(a,c,d){b.warning(a,c,d)},info:function(a,c,d){b.info(a,c,d)},error:function(a,c,d){b.error(a,c,d)}}}(jQuery,toastr||{});jQuery(function(){MessageBox.init()});